---
title: "Implement a Cron Job in ASP.NET Core 6"
summary: "In modern web application development, it's common to need to run tasks periodically or on a schedule—such as sending emails, generating reports, or performing database maintenance. These tasks, known as cron jobs, are essential for efficient resource management and application performance."
publishedAt: "2023-05-12 19:00:00"
topics:
  - Backend
  - Asp Net
---

In modern web application development, it's common to need to run tasks periodically or on a schedule—such as sending emails, generating reports,
or performing database maintenance. These tasks, known as cron jobs, are essential for efficient resource management and application performance.

In this blog post, we’ll explore how to implement a cron job in an ASP.NET Core Web API application using the `Hangfire.AspNetCore` package.
Hangfire is a powerful, flexible, open-source library that lets you schedule and manage background tasks in an efficient and scalable way.
It also provides a built-in dashboard for monitoring and administering your scheduled jobs.

Below, I’ll guide you step by step through configuring Hangfire in an ASP.NET Core Web API project and show you how to implement a simple
cron job to send emails. Let’s get started!

## Installing Packages

Install the `Hangfire.AspNetCore` and `Hangfire.MemoryStorage` packages. You can do this via the NuGet Package Manager.

Or, use the NuGet Console or .NET CLI:

```bash
NuGet\Install-Package Hangfire.AspNetCore -Version 1.8.0
NuGet\Install-Package Hangfire.MemoryStorage -Version 1.7.0
```

```bash
dotnet add package Hangfire.AspNetCore --version 1.8.0
dotnet add package Hangfire.MemoryStorage --version 1.7.0
```

## Configuring Hangfire

Open `Program.cs` and add the following references and configuration for Hangfire:

<Alert variant="light" color="blue" title="Important">
  In-memory storage is only suitable for development and testing. For
  production, consider using a persistent storage option like SQL Server, MySQL,
  or another supported by Hangfire.
</Alert>

```csharp
// Program.cs

using Hangfire;
using Hangfire.MemoryStorage;

builder.Services.AddHangfire(x => x
    .SetDataCompatibilityLevel(CompatibilityLevel.Version_170)
    .UseSimpleAssemblyNameTypeSerializer()
    .UseRecommendedSerializerSettings()
    .UseMemoryStorage()
);

builder.Services.AddHangfireServer();
```

## Creating the Cron Job

Create a folder named `Helpers` and add a `CronJobs` class:

```csharp
// Helpers/CronJobs.cs

public class CronJobs
{
    public async Task CustomTask()
    {
        Console.WriteLine($"Do something - {DateTime.Now:yyyy-mm-dd H:mm:ss}");
        await Task.CompletedTask;
    }
}
```

## Enabling the Hangfire Dashboard

To enable the Hangfire dashboard in `Program.cs`, add `app.UseHangfireDashboard()` after `app.UseAuthorization()` and before `app.MapControllers()`:

```csharp
// Program.cs

app.UseAuthorization();
app.UseHangfireDashboard();
app.MapControllers();
```

## Registering the Cron Job

In `Program.cs`, add the following lines before `app.Run()` to properly register the recurring job:

```csharp
// Program.cs

RecurringJob.AddOrUpdate<CronJobs>("CustomTask", x => x.CustomTask(), Cron.Minutely);

app.Run();
```

If everything is configured correctly, you can view your recurring jobs on the Hangfire dashboard at: [https://localhost:7021/hangfire/recurring](https://localhost:7021/hangfire/recurring)

Additionally, in the Visual Studio debug console, you’ll see the scheduled task running every minute.

I hope this article helps you implement a cron job with Hangfire in your ASP.NET Core Web API. If you have any questions or feedback, feel free to leave a comment below.
If you found this post useful, please share it with your friends and colleagues so they can benefit as well.

Thanks for reading, and don’t forget to share your Hangfire experiences in your projects!
