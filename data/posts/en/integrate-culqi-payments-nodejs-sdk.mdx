---
title: "Integrate Culqi Payments with the Node.js SDK"
summary: "Learn how to use the `culqi-nodejs` package to tokenize cards, create one-time charges, and configure recurring payments (plans and subscriptions) easily and securely in your Node.js applications."
cover: "/images/data/integrate-culqi-payments-nodejs-sdk.png"
publishedAt: "2025-07-30 19:00:00"
topics:
  - Backend
  - Node.js
---

In this article we’ll explore **culqi-nodejs**, an _wrapper_ around the Culqi APIs for Node.js. With it you can:

- Tokenize card data securely.
- Create **one-time charges**.
- Configure **recurring payments** via plans and subscriptions.

By the end, you’ll have a complete end-to-end payment flow ready for production.

## Installation

Install the package from npm:

```bash
npm install culqi-nodejs
```

Then set your keys in environment variables:

```tsx
CULQI_PUBLIC_KEY = "pk_test_XXXXXXXXXXXXX";
CULQI_SECRET_KEY = "sk_test_XXXXXXXXXXXXX";
```

<Alert title="Security tip">
  Never expose your `CULQI_SECRET_KEY` in client code or public repos.
</Alert>

## Initialize the Client

Before making any calls, initialize the Culqi client:

```tsx
import { CulqiClient } from "culqi-nodejs";

const culqi = CulqiClient.init({
  publicKey: process.env.CULQI_PUBLIC_KEY!,
  secretKey: process.env.CULQI_SECRET_KEY!,
  apiVersion: "2", // Culqi API version
});
```

## Tokenization

**Tokenization** captures sensitive card data in the browser (or mobile frontend) and returns a secure token—no real card data hits your servers.
You can use Culqi’s frontend helpers or generate the token server-side if you already have the public key (but that increases your PCI scope).

```tsx
const token = await culqi.tokens.create({
  card_number: "4111111111111111",
  cvv: "123",
  expiration_month: "07",
  expiration_year: "2027",
  email: "customer@example.com",
});

console.log("Token:", token.id);
// e.g.: tkn_test_XXXXXXXXXXXX
```

<Alert title="Important">
  If you tokenize on the backend, your server processes raw card data and must
  comply with PCI-DSS SAQ-D.
</Alert>

## Create a One-Time Charge

Use the token ID to process a one-time charge:

```tsx
const charge = await culqi.charges.create({
  amount: 1000, // in cents (e.g. S/ 10.00 = 1000)
  currency_code: "PEN", // ISO currency code
  source_id: token.id, // the token generated above
  email: "cliente@dominio.com",
});

console.log("Charge:", charge);
// Check `charge.outcome.code === "AUT0000"`
```

## Recurring Payments

For subscriptions you’ll need to:

- Create a plan
- Register the customer
- Attach a card to the customer
- Create the subscription

### Create a Plan

Define name, amount, interval, and initial cycles:

```tsx
const plan = await culqi.plans.create({
  name: "Monthly Plan",
  short_name: "monthly-plan",
  description: "Premium monthly access",
  amount: 5000, // S/ 50.00
  currency: "PEN",
  interval_unit_time: 1, // 1 = monthly
  interval_count: 1, // every 1 month
  initial_cycles: {
    count: 0,
    has_initial_charge: false,
    amount: 0,
    interval_unit_time: 1,
  },
});

console.log("Plan:", plan.id);
// e.g.: pln_test_XXXXXXXXXXXXXXXX
```

### Register the Customer

Create a `customer` resource with user data:

```tsx
const customer = await culqi.customers.create({
  first_name: "Jane",
  last_name: "Doe",
  email: "jane@example.com",
  address: "123 Main St",
  address_city: "Lima",
  country_code: "PE",
  phone_number: "987654321",
});

console.log("Customer:", customer.id);
// e.g.: cus_test_XXXXXXXXXXXXXXXX
```

### Attach a Card

Tokenize (or reuse a token) to create a card linked to the customer:

```tsx
const token2 = await culqi.tokens.create({
  /* … */
});

const card = await culqi.cards.create({
  customer_id: customer.id,
  token_id: token2.id,
  validate: true, // validate card
});

console.log("Card:", card.id);
// e.g.: crd_test_XXXXXXXXXXXXXXXX
```

### Create the Subscription

Finally, generate the subscription:

```tsx
const subscription = await culqi.subscriptions.create({
  card_id: card.id,
  plan_id: plan.id,
  tyc: true, // terms acceptance
});

console.log("Subscription:", subscription.id);
// e.g.: sub_test_XXXXXXXXXXXXXXXX
```

## Error Handling

Wrap your calls in `try/catch` and handle Culqi errors gracefully:

```tsx
try {
  await culqi.charges.create({
    /* ... */
  });
} catch (err: any) {
  console.error("Error Culqi:", err.message);
}
```

## Conclusion

The `culqi-nodejs` SDK abstracts away the complexity of Culqi’s REST APIs, providing a natural Node.js-friendly flow for all payment types. Remember:

- **Tokenize:** minimize your PCI scope and protect customers.
- **One-time charges:** for single purchases.
- **Plans & subscriptions:** for recurring revenue.

You’re all set to integrate Culqi into your Node.js projects securely and efficiently.
If you found this guide helpful, share it and leave your questions in the comments. Thanks for reading!
